version: 2

models:
  - name: stg_ad_network_1_campaign_updates
    description: "Campaign history report from Ad Network 1."
    columns:
      - name: campaign_id
        description: "Unique ID of a marketing campaign from Ad Network 1."
        tests:
          - not_null
      - name: update_date
        description: "Date when the campaign info was last updated."
        tests:
          - not_null
      - name: campaign_name
        description: "Name of the campaign."

  - name: stg_ad_network_1_geo_dictionary
    description: "Geo dictionary mapping location IDs to country, state, city, etc."
    columns:
      - name: location_id
        description: "Unique ID of a location."
        tests:
          - not_null
      - name: country_code
        description: "Alpha-2 code of the country."
      - name: location_name
        description: "Full name of the location."
      - name: location_type
        description: "Type of the location (e.g., country, state, city, postal_code)."
        
  - name: stg_ad_network_1_country_report
    description: "Country-level performance report from Ad Network 1."
    tests:
      - unique:
          column_name: "concat(campaign_id, '-', report_date, '-', country_id)"
    columns:
      - name: report_date
        description: "Date of the report."
        tests:
          - not_null
      - name: campaign_id
        description: "Campaign ID (links to campaign updates)."
        tests:
          - not_null
          - relationships:
              to: ref('stg_ad_network_1_campaign_updates')
              field: campaign_id
      - name: country_id
        description: "ID of the country location."
        tests:
          - not_null
          - relationships:
              to: ref('stg_ad_network_1_geo_dictionary')
              field: location_id
      - name: spend
        description: "Total ad spend (USD)."
      - name: impressions
        description: "Number of ad impressions."
      - name: clicks
        description: "Number of ad clicks."

  - name: stg_ad_network_1_detailed_report
    description: "State-level performance report for Ad Network 1."
    tests:
      - unique:
          column_name: "concat(campaign_id, '-', report_date, '-', state_id)"
    columns:
      - name: report_date
        description: "Date of the report."
        tests:
          - not_null
      - name: campaign_id
        description: "Campaign ID (links to campaign updates)."
        tests:
          - not_null
          - relationships:
              to: ref('stg_ad_network_1_campaign_updates')
              field: campaign_id
      - name: state_id
        description: "ID of the state or region."
        tests:
          - not_null
          - relationships:
              to: ref('stg_ad_network_1_geo_dictionary')
              field: location_id
      - name: country_id
        description: "ID of the parent country."
        tests:
          - relationships:
              to: ref('stg_ad_network_1_geo_dictionary')
              field: location_id
      - name: spend
        description: "Ad spend (USD)."
      - name: impressions
        description: "Number of impressions."
      - name: clicks
        description: "Number of clicks."

  - name: stg_ad_network_2_report
    description: "Performance report of Ad Network 2 (country-level only)."
    tests:
      - unique:
          column_name: "concat(campaign_id, '-', report_date)"
    columns:
      - name: campaign_id
        description: "Unique campaign ID from Ad Network 2."
        tests:
          - not_null
      - name: campaign_name
        description: "Campaign name."
      - name: report_date
        description: "Date of the report."
        tests:
          - not_null
      - name: spend
        description: "Ad spend (USD)."
      - name: impressions
        description: "Number of impressions."
      - name: clicks
        description: "Number of ad clicks."
